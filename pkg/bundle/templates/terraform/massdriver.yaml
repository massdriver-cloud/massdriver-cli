# This file will be used to generate all of the schema-*.json files in a bundle
schema: draft-07
name: "{{mass .Name mass}}"
description: "{{mass .Description mass}}"
ref: github.com/YOUR_NAME_HERE/{{mass .Name mass}}
access: "{{mass .Access mass}}"
type: "{{mass .Type mass}}"

# schema-params.json
# JSON Schema sans-fields above
params:
  examples:
    - foo: US-West 2 VPC
    - foo: US-East 1 VPC
  required:
    - foo
  properties:
    foo:
      type: string
      title: Foo
      description: Name of {{mass .Name mass}}
      default: ""
      examples:
        - US-West 2 VPC
        - US-East 1 VPC

# schema-connections.json
# Named list of input connections (artifacts) (map[name]artifact)
{{mass if not .Connections mass}}
connections:
  properties: {}
{{mass end -mass}}

{{mass if .Connections mass}}
connections:
  required:
  {{mass- range $key, $art:= .Connections mass}}
    - {{mass $key mass}}
  {{mass- end mass}}
  properties:
  {{mass- range $key, $art:= .Connections mass}}
    {{mass $key mass}}:
      $ref: {{mass $art mass}}
  {{mass- end mass}}
{{mass- end mass}}

# schema-artifacts.json
# Named list of output artifacts  (map[name]artifact)
artifacts:
  properties: {}
  # required:
  #   - network
  # properties:
  #   network:
  #     $ref: massdriver/aws-vpc

# schema-ui.json
# List of form customizations for params-schema
ui:
  ui:order:
    - "*"
  ## set top level ui:wiget
  # secret_key:
  #    ui:widget: "password"
  ## Set key in an array of objects
  # secrets:
  #   items:
  #     mdKeyId:
  #       ui:widget: "hidden"
